{% extends 'base.html' %}
{% block title %}Profile setup - BioAP{% endblock %}
{% block content %}
  <div class="card mb-3">
    <div class="card-body">
      <h5 class="card-title mb-2">Profile setup: {{ profile.name }}</h5>
      <p class="text-muted small mb-3">Set the number of cases (data points) and the number of concentrations (calibration curve points) for each case.</p>
      {% if existing_cases > 0 %}
        <div class="alert alert-info mb-0">
          This profile already has {{ existing_cases }} case(s). <a href="{{ url_for('calibration') }}">Return to calibration</a> to edit them, or delete the profile to start over.
        </div>
      {% else %}
        <form method="post" action="{{ url_for('profile_setup', profile_id=profile.id) }}" class="row g-3">
          <div class="col-12 col-md-6">
            <label class="form-label">Number of cases (data points)</label>
            <input type="number" name="num_cases" class="form-control" min="1" max="50" value="3" required>
            <div class="form-text">How many analytes/cases to calibrate in this profile.</div>
          </div>
          <div class="col-12 col-md-6">
            <label class="form-label">Number of concentrations (curve points per case)</label>
            <input type="number" name="num_concentrations" class="form-control" min="2" max="20" value="3" required>
            <div class="form-text">At least 2 points per case (concentration vs RGB).</div>
          </div>
          <div class="col-12 d-flex gap-2">
            <button type="submit" class="btn btn-primary">Create cases</button>
            <a href="{{ url_for('calibration') }}" class="btn btn-outline-secondary">Cancel</a>
          </div>
        </form>
      {% endif %}
    </div>
  </div>
{% endblock %}
